<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selbsteinschätzung - BBW Digitale Kompetenzen</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            min-height: calc(100vh - 40px);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .back-button {
            display: inline-block;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 20px;
            transition: background 0.3s;
        }

        .back-button:hover {
            background: #5a67d8;
        }

        h1 {
            color: #2d3748;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #718096;
            font-size: 1.1em;
        }

        /* Code Entry Section */
        .code-entry {
            background: #f8f9fa;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }

        .code-entry h2 {
            color: #495057;
            margin-bottom: 20px;
        }

        .code-input-group {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 30px 0;
        }

        .code-input {
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            width: 250px;
            text-align: center;
            text-transform: uppercase;
        }

        .code-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .start-button {
            padding: 15px 40px;
            background: #FF6B6B;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .start-button:hover {
            background: #E53E3E;
            transform: translateY(-2px);
        }

        .start-button:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }

        /* Test Section */
        .test-section {
            display: none;
        }

        .test-section.active {
            display: block;
        }

        /* Progress Bar */
        .progress-container {
            background: #e9ecef;
            border-radius: 10px;
            height: 30px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Section Header */
        .section-header {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .section-title {
            font-size: 1.8em;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .section-description {
            color: #718096;
            font-size: 1em;
            line-height: 1.6;
        }

        .section-progress {
            margin-top: 15px;
            font-size: 0.9em;
            color: #667eea;
            font-weight: bold;
        }

        /* Question Card */
        .question-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid transparent;
            transition: border-color 0.3s;
        }

        .question-card.answered {
            border-color: #667eea;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .category-badge {
            padding: 5px 15px;
            border-radius: 20px;
            color: white;
            font-size: 0.9em;
            font-weight: bold;
        }

        .category-1 { background: #3887be; }
        .category-2 { background: #28a745; }
        .category-3 { background: #e74c3c; }
        .category-4 { background: #8e44ad; }
        .category-5 { background: #e67e22; }

        .subcategory-label {
            font-size: 0.85em;
            color: #6c757d;
            margin-bottom: 10px;
            font-style: italic;
            font-weight: bold;
        }

        /* NEU: Farben für Unterkategorien */
        /* Sektion 1: Blautöne */
        .subcategory-1-1 { color: #0077b6; }
        .subcategory-1-2 { color: #023e8a; }
        .subcategory-1-3 { color: #48cae4; }

        /* Sektion 2: Grüntöne */
        .subcategory-2-1 { color: #2a9d8f; }
        .subcategory-2-2 { color: #2d6a4f; }
        .subcategory-2-3 { color: #80b918; }

        /* Sektion 3: Rot-/Orangetöne */
        .subcategory-3-1 { color: #e63946; }
        .subcategory-3-2 { color: #f4a261; }
        .subcategory-3-3 { color: #e76f51; }

        /* Sektion 4: Lilatöne */
        .subcategory-4-1 { color: #5a189a; }
        .subcategory-4-2 { color: #9d4edd; }
        .subcategory-4-3 { color: #c77dff; }

        /* Sektion 5: Gelb-/Orangetöne */
        .subcategory-5-1 { color: #fca311; }
        .subcategory-5-2 { color: #e85d04; }
        .subcategory-5-3 { color: #ffba08; }


        .question-text {
            font-size: 1.1em;
            color: #2d3748;
            margin-bottom: 20px;
            line-height: 1.6;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        /* Info Button */
        .info-button {
            min-width: 30px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .info-button:hover {
            background: #5a67d8;
            transform: scale(1.1);
        }

        /* Info Box */
        .info-box {
            display: none;
            background: #e8f4ff;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            animation: slideDown 0.3s ease;
        }

        .info-box.active {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .info-box h4 {
            color: #2d3748;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .info-box p {
            color: #4a5568;
            font-size: 0.9em;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .concept-tags {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .concept-tag {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .ikt-tag {
            background: #d6e8f5;
            color: #3887be;
        }

        .paed-tag {
            background: #fce5e2;
            color: #e74c3c;
        }

        /* Answer Options */
        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .answer-option {
            padding: 12px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }

        .answer-option:hover {
            border-color: #667eea;
            background: #f7f7ff;
        }

        .answer-option input[type="radio"] {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .answer-option label {
            cursor: pointer;
            flex: 1;
            font-size: 0.95em;
        }

        .answer-option.selected {
            border-color: #667eea;
            background: #f0f0ff;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            position: sticky;
            bottom: 0;
            background: white;
            padding: 20px 0;
        }

        .nav-button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .prev-button {
            background: #e9ecef;
            color: #495057;
        }

        .prev-button:hover {
            background: #dee2e6;
        }

        .next-button {
            background: #667eea;
            color: white;
        }

        .next-button:hover {
            background: #5a67d8;
        }

        .submit-button {
            background: #28a745;
            color: white;
        }

        .submit-button:hover {
            background: #218838;
        }

        /* Results Section */
        .results-section {
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: linear-gradient(135deg, #28a745, #20c997); }
        .score-good { background: linear-gradient(135deg, #ffc107, #fd7e14); }
        .score-needs-improvement { background: linear-gradient(135deg, #dc3545, #c82333); }

        .category-results {
            margin: 30px 0;
        }

        .category-result {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .category-result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .category-result-title {
            font-weight: bold;
            color: #2d3748;
        }

        .category-result-score {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 5px;
            background: white;
        }

        .subcategory-results {
            margin-top: 10px;
            padding-left: 20px;
            font-size: 0.9em;
            color: #6c757d;
        }

        .subcategory-item {
            margin: 5px 0;
        }

        .result-bar-container {
            background: #e9ecef;
            border-radius: 5px;
            height: 20px;
            overflow: hidden;
        }

        .result-bar {
            height: 100%;
            border-radius: 5px;
            transition: width 1s ease;
        }

        /* Recommendations */
        .recommendations {
            background: #f0f8ff;
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }

        .recommendations h3 {
            color: #495057;
            margin-bottom: 20px;
        }

        .recommendation-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .action-button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .print-button {
            background: #6c757d;
            color: white;
        }

        .print-button:hover {
            background: #5a6268;
        }

        .restart-button {
            background: #667eea;
            color: white;
        }

        .restart-button:hover {
            background: #5a67d8;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .code-input {
                width: 200px;
            }

            .question-text {
                font-size: 1em;
            }

            .nav-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .nav-button {
                width: 100%;
            }
        }

        @media print {
            body {
                background: white;
            }
            
            .container {
                box-shadow: none;
                padding: 20px;
            }

            .back-button,
            .action-buttons,
            .info-button {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-button">← Zurück zur Startseite</a>
        
        <div class="header">
            <h1>Selbsteinschätzung</h1>
            <p class="subtitle">Überprüfen Sie Ihre digitalen Kompetenzen</p>
        </div>

        <div id="codeEntry" class="code-entry">
            <h2>Zugangs-Code eingeben</h2>
            <p>Bitte geben Sie den Code ein, den Sie von Ihrer Abteilungsleitung erhalten haben.</p>
            <div class="code-input-group">
                <input type="text" 
                       id="accessCode" 
                       class="code-input" 
                       placeholder="CODE-XXXX" 
                       maxlength="10">
                <button id="startTest" class="start-button" onclick="startTest()">
                    Test starten
                </button>
            </div>
            <p style="color: #6c757d; font-size: 0.9em; margin-top: 20px;">
                Der Code dient zur anonymen Zuordnung Ihrer Ergebnisse zu Ihrer Abteilung.
            </p>
        </div>

        <div id="testSection" class="test-section">
            <div class="progress-container">
                <div id="progressBar" class="progress-bar" style="width: 0%">
                    Bereich 1 von 5
                </div>
            </div>

            <div id="sectionContainer">
                </div>

            <div class="nav-buttons">
                <button id="prevButton" class="nav-button prev-button" onclick="previousSection()">
                    ← Vorheriger Bereich
                </button>
                <button id="nextButton" class="nav-button next-button" onclick="nextSection()">
                    Nächster Bereich →
                </button>
                <button id="submitButton" class="nav-button submit-button" onclick="submitTest()" style="display: none;">
                    Test abschliessen
                </button>
            </div>
        </div>

        <div id="resultsSection" class="results-section">
            <div class="results-header">
                <h2>Ihre Ergebnisse</h2>
                <div id="scoreCircle" class="score-circle">
                    </div>
                <p id="scoreText" style="font-size: 1.2em; color: #495057;"></p>
            </div>

            <div id="categoryResults" class="category-results">
                </div>

            <div id="recommendations" class="recommendations">
                <h3>Empfohlene Entwicklungsmassnahmen</h3>
                <div id="recommendationsList">
                    </div>
            </div>

            <div class="action-buttons">
                <button class="action-button print-button" onclick="window.print()">
                    📄 Ergebnisse drucken
                </button>
                <button class="action-button restart-button" onclick="restartTest()">
                    🔄 Neuer Test
                </button>
            </div>
        </div>
    </div>

    <script>
        window.__firebase_config = JSON.stringify({
            apiKey: "AIzaSyCHhycjQmHU00_dQl5Xdo5PZCTn8JODk20",
            authDomain: "ikt-komp-bbw.firebaseapp.com",
            projectId: "ikt-komp-bbw",
            storageBucket: "ikt-komp-bbw.firebasestorage.app",
            messagingSenderId: "154620660911",
            appId: "1:154620660911:web:20d389d699d2f0d2c2d85a",
            measurementId: "G-JZ1VC46184"
        });
    </script>

    <script type="module">
        // Firebase imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, query, where, getDocs, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // Firebase initialisieren
        let db = null;
        let firebaseReady = false;
        
        try {
            const firebaseConfig = JSON.parse(window.__firebase_config);
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            firebaseReady = true;
            console.log("Firebase initialisiert für Selbsttest");
        } catch (e) {
            console.warn("Firebase nicht verfügbar, nutze lokalen Speicher:", e);
        }

        // Complete Test Questions Database with ALL competencies
        const sections = [
            {
                id: 1,
                name: "Grundkenntnisse IKT",
                description: "Grundlegende technische Fähigkeiten zum Umgang mit digitalen Geräten, Anwendungen und Systemen als Fundament für digitale Lehr- und Lernszenarien.",
                questions: [
                    // 1.1 Geräte und Systeme
                    {
                        id: 1,
                        subcategory: "1.1 Geräte und Systeme",
                        text: "Wie sicher fühlen Sie sich beim Vornehmen von Grundeinstellungen an technischen Geräten und beim Verbinden mit anderen Geräten?",
                        info: {
                            examples: "Beamer über HDMI/VGA verbinden, Drucker im Netzwerk einrichten, Audio-Einstellungen konfigurieren, Bildschirmauflösung anpassen, externe Monitore einrichten",
                            tools: "Windows-Einstellungen, Systemsteuerung, Geräte-Manager, Verbindungskabel",
                            tips: "Dokumentieren Sie funktionierende Einstellungen. Halten Sie Adapter bereit. Testen Sie Verbindungen vor dem Unterricht.",
                            ikt: "RE 💚 - Ressourceneffizienz",
                            paed: "PDM 🛠️ - Didaktik & Methoden"
                        },
                        options: [
                            { value: 4, text: "Sehr sicher - Ich kann problemlos verschiedene Geräte verbinden und konfigurieren" },
                            { value: 3, text: "Sicher - Ich kann die meisten Geräte ohne Hilfe verbinden" },
                            { value: 2, text: "Teilweise sicher - Manchmal benötige ich Unterstützung" },
                            { value: 1, text: "Unsicher - Ich benötige oft Hilfe beim Verbinden von Geräten" }
                        ]
                    },
                    {
                        id: 2,
                        subcategory: "1.1 Geräte und Systeme",
                        text: "Wie gut können Sie Ihr Smartphone mit der Schulumgebung verbinden und Apps für Schulorganisation/Unterricht einrichten?",
                        info: {
                            examples: "WLAN-Verbindung einrichten, E-Mail-Konto konfigurieren, Teams-App installieren, OneDrive synchronisieren, Kalender-Sync aktivieren",
                            tools: "Microsoft Teams Mobile, Outlook Mobile, OneDrive, Authenticator App",
                            tips: "Nutzen Sie 2-Faktor-Authentifizierung. Aktivieren Sie automatische Updates. Trennen Sie berufliche und private Daten.",
                            ikt: "KN 🌐 - Vernetzung",
                            paed: "PDM 🛠️ - Mobile Integration"
                        },
                        options: [
                            { value: 4, text: "Professionell - Alle Apps sind eingerichtet und synchronisiert" },
                            { value: 3, text: "Gut - Die wichtigsten Apps funktionieren problemlos" },
                            { value: 2, text: "Grundlegend - Einige Apps sind eingerichtet" },
                            { value: 1, text: "Wenig - Ich nutze kaum schulische Apps auf dem Smartphone" }
                        ]
                    },
                    // 1.2 Software und Anwendungen
                    {
                        id: 3,
                        subcategory: "1.2 Software und Anwendungen",
                        text: "Wie gut können Sie Office-Programme (Word, Excel, PowerPoint) für die Erstellung von Unterrichtsmaterialien nutzen?",
                        info: {
                            examples: "Arbeitsblätter mit Formatvorlagen, Excel für Notenverwaltung, interaktive PowerPoints, Serienbriefe, Formulare erstellen",
                            tools: "Microsoft 365, Office Online, Vorlagen-Bibliothek",
                            tips: "Nutzen Sie Vorlagen für wiederkehrende Dokumente. Lernen Sie Tastenkombinationen. Automatisieren Sie Routineaufgaben.",
                            ikt: "MV 🔄 - Medienvielfalt",
                            paed: "PDM 🛠️ - Methodenvielfalt"
                        },
                        options: [
                            { value: 4, text: "Experte - Ich nutze erweiterte Funktionen wie Makros und Automatisierungen" },
                            { value: 3, text: "Fortgeschritten - Ich erstelle ansprechende Materialien mit verschiedenen Funktionen" },
                            { value: 2, text: "Grundlegend - Ich kann einfache Dokumente und Präsentationen erstellen" },
                            { value: 1, text: "Basis - Ich kenne nur die wichtigsten Grundfunktionen" }
                        ]
                    },
                    {
                        id: 4,
                        subcategory: "1.2 Software und Anwendungen",
                        text: "Wie sicher sind Sie im Umgang mit fachspezifischer Software für Ihren Unterricht?",
                        info: {
                            examples: "GeoGebra für Mathematik, CAD-Programme, Programmierumgebungen, Simulationssoftware, Fachspezifische Tools",
                            tools: "Je nach Fachbereich: GeoGebra, TinkerCAD, Scratch, PhET Simulations, ChemSketch",
                            tips: "Beginnen Sie mit einfachen Features. Nutzen Sie Tutorials. Tauschen Sie sich mit Fachkollegen aus.",
                            ikt: "HE 💡 - Heterogenität",
                            paed: "PU 📚 - Praxisorientierung"
                        },
                        options: [
                            { value: 4, text: "Expertenniveau - Ich kann komplexe fachspezifische Anwendungen souverän einsetzen" },
                            { value: 3, text: "Sicher - Ich nutze regelmässig fachspezifische Software" },
                            { value: 2, text: "Grundkenntnisse - Ich kann einfache Funktionen nutzen" },
                            { value: 1, text: "Wenig - Ich nutze kaum fachspezifische Software" }
                        ]
                    },
                    // 1.3 Cloud und digitale Ressourcen
                    {
                        id: 5,
                        subcategory: "1.3 Cloud und digitale Ressourcen",
                        text: "Wie routiniert nutzen Sie Cloud-Dienste für die Erstellung und Verwaltung von Unterrichtsressourcen?",
                        info: {
                            examples: "OneDrive-Ordnerstruktur, SharePoint-Bibliotheken, Teams-Dateien, Versionsverwaltung, Freigabeeinstellungen",
                            tools: "Microsoft OneDrive, SharePoint, Teams Files, Google Drive",
                            tips: "Strukturieren Sie Ordner nach Klassen/Fächern. Nutzen Sie die Suchfunktion. Aktivieren Sie automatische Synchronisation.",
                            ikt: "KN 🌐 - Vernetzung",
                            paed: "PDM 🛠️ - Digitale Organisation"
                        },
                        options: [
                            { value: 4, text: "Cloud-First - Ich arbeite primär in der Cloud mit ausgefeilter Organisation" },
                            { value: 3, text: "Regelmässig - Cloud-Dienste sind fester Bestandteil meiner Arbeit" },
                            { value: 2, text: "Gelegentlich - Ich nutze Cloud-Dienste für ausgewählte Zwecke" },
                            { value: 1, text: "Selten - Ich arbeite hauptsächlich lokal" }
                        ]
                    },
                    {
                        id: 6,
                        subcategory: "1.3 Cloud und digitale Ressourcen",
                        text: "Wie gut kennen Sie die Ed-Tech-Lizenzen Ihrer Schule und können deren Kernfunktionen anwenden?",
                        info: {
                            examples: "Fobizz-Tools, to-teach.ai, Canva Education, Adobe Creative Cloud, Microsoft Education Tools",
                            tools: "Schulinterne Lizenzübersicht, Ed-Tech-Portal, Digitale Werkzeugkiste",
                            tips: "Verschaffen Sie sich einen Überblick über alle Lizenzen. Priorisieren Sie 2-3 Tools zum Start. Besuchen Sie Schulungen.",
                            ikt: "MV 🔄 - Medienvielfalt",
                            paed: "PDM 🛠️ - Werkzeugkompetenz"
                        },
                        options: [
                            { value: 4, text: "Umfassend - Ich kenne und nutze die meisten verfügbaren Tools aktiv" },
                            { value: 3, text: "Gut - Ich nutze regelmässig mehrere Ed-Tech-Tools" },
                            { value: 2, text: "Basis - Ich kenne einige Tools und nutze sie gelegentlich" },
                            { value: 1, text: "Wenig - Ich kenne die verfügbaren Lizenzen kaum" }
                        ]
                    }
                ]
            },
            {
                id: 2,
                name: "Anwendung im Unterricht",
                description: "Praktische Implementierung digitaler Medien in den Unterrichtsprozess. Digitale Technologien didaktisch sinnvoll in allen Phasen des Unterrichts einsetzen.",
                questions: [
                    // 2.1 Unterrichtsvorbereitung
                    {
                        id: 7,
                        subcategory: "2.1 Unterrichtsvorbereitung",
                        text: "Wie häufig setzen Sie digitale Werkzeuge und KI-Tools für die Erstellung von Lernmaterialien ein?",
                        info: {
                            examples: "ChatGPT für Aufgabenerstellung, Fobizz für Arbeitsblätter, Canva für Infografiken, to-teach.ai für Übungen, KI-Bildgeneratoren",
                            tools: "ChatGPT, Claude, Fobizz, to-teach.ai, Canva, Gamma, Curipod",
                            tips: "Starten Sie mit einem Tool. Prüfen Sie KI-Inhalte immer. Sammeln Sie erfolgreiche Prompts.",
                            ikt: "RE 💚 - Effizienz",
                            paed: "PDM 🛠️ - Innovative Methoden"
                        },
                        options: [
                            { value: 4, text: "Systematisch - Bei fast jeder Unterrichtsvorbereitung" },
                            { value: 3, text: "Häufig - Bei den meisten Vorbereitungen" },
                            { value: 2, text: "Gelegentlich - Es kommt vor, ist aber nicht die Regel" },
                            { value: 1, text: "Selten - Ich nutze kaum digitale Tools zur Materialerstellung" }
                        ]
                    },
                    {
                        id: 8,
                        subcategory: "2.1 Unterrichtsvorbereitung",
                        text: "Wie gut können Sie digitale Lerneinheiten entwickeln?",
                        info: {
                            examples: "Interaktive Lernpfade, H5P-Inhalte, SCORM-Pakete, OpenOlat-Module, Selbstlerneinheiten",
                            tools: "OpenOlat, H5P, Articulate, iSpring, Microsoft Sway",
                            tips: "Beginnen Sie mit kleinen Einheiten. Nutzen Sie Templates. Holen Sie Feedback von Lernenden ein.",
                            ikt: "HE 💡 - Kreativität",
                            paed: "PL 🎓 - Selbstgesteuertes Lernen"
                        },
                        options: [
                            { value: 4, text: "Professionell - Ich erstelle komplexe, interaktive Lerneinheiten" },
                            { value: 3, text: "Gut - Ich kann strukturierte digitale Lerneinheiten entwickeln" },
                            { value: 2, text: "Grundlegend - Ich kann einfache digitale Materialien zusammenstellen" },
                            { value: 1, text: "Wenig - Ich habe kaum Erfahrung mit digitalen Lerneinheiten" }
                        ]
                    },
                    // 2.2 Unterrichtsdurchführung
                    {
                        id: 9,
                        subcategory: "2.2 Unterrichtsdurchführung",
                        text: "Wie interaktiv gestalten Sie Ihren Unterricht mit schulinternen Ed-Tech-Tools?",
                        info: {
                            examples: "Kahoot-Quiz, Mentimeter-Umfragen, Padlet-Brainstorming, Quizlet-Übungen, digitale Pinnwände",
                            tools: "Kahoot, Mentimeter, Padlet, Quizlet, Miro, Wooclap",
                            tips: "Bereiten Sie immer eine Alternative vor. Testen Sie Tools vorab. Variieren Sie die Methoden.",
                            ikt: "HE 💡 - Innovation",
                            paed: "PL 🎓 - Aktives Lernen"
                        },
                        options: [
                            { value: 4, text: "Sehr interaktiv - Regelmässiger Einsatz verschiedener interaktiver Tools" },
                            { value: 3, text: "Interaktiv - Häufige Nutzung interaktiver Elemente" },
                            { value: 2, text: "Gelegentlich - Sporadischer Einsatz interaktiver Tools" },
                            { value: 1, text: "Wenig - Kaum Nutzung interaktiver Elemente" }
                        ]
                    },
                    {
                        id: 10,
                        subcategory: "2.2 Unterrichtsdurchführung",
                        text: "Wie gut ermöglichen Sie Lernenden, in Teams oder anderen Kommunikationstools Fragen zu stellen?",
                        info: {
                            examples: "Teams-Chat während Unterricht, Q&A-Funktion, anonyme Fragen, digitale Sprechstunden, Diskussionsforen",
                            tools: "Microsoft Teams, Chat-Funktion, Forms für anonyme Fragen, Padlet",
                            tips: "Definieren Sie klare Regeln. Reagieren Sie zeitnah. Fördern Sie respektvolle Kommunikation.",
                            ikt: "KN 🌐 - Kommunikation",
                            paed: "PLL 👥 - Beziehungsgestaltung"
                        },
                        options: [
                            { value: 4, text: "Systematisch - Verschiedene digitale Fragekanäle sind etabliert" },
                            { value: 3, text: "Regelmässig - Digitale Fragemöglichkeiten werden aktiv genutzt" },
                            { value: 2, text: "Teilweise - Gelegentliche Nutzung digitaler Kommunikation" },
                            { value: 1, text: "Selten - Kaum digitale Interaktionsmöglichkeiten" }
                        ]
                    },
                    // 2.3 Leistungserfassung und Feedback
                    {
                        id: 11,
                        subcategory: "2.3 Leistungserfassung und Feedback",
                        text: "Wie systematisch erfassen Sie Rückmeldungen und Feedback mit digitalen Hilfsmitteln?",
                        info: {
                            examples: "Forms-Umfragen, Peer-Feedback-Tools, digitale Rubrics, Audio-Feedback, Kommentarfunktion",
                            tools: "Microsoft Forms, FeedbackFruits, Turnitin, OneNote-Feedback, Teams Assignments",
                            tips: "Nutzen Sie verschiedene Feedback-Formen. Geben Sie zeitnahes Feedback. Verwenden Sie Vorlagen.",
                            ikt: "MG 🛠️ - Gestaltung",
                            paed: "PLL 👥 - Lernbegleitung"
                        },
                        options: [
                            { value: 4, text: "Umfassend - Strukturiertes digitales Feedback-System etabliert" },
                            { value: 3, text: "Regelmässig - Häufige Nutzung digitaler Feedback-Tools" },
                            { value: 2, text: "Gelegentlich - Sporadisches digitales Feedback" },
                            { value: 1, text: "Selten - Hauptsächlich analoges Feedback" }
                        ]
                    },
                    {
                        id: 12,
                        subcategory: "2.3 Leistungserfassung und Feedback",
                        text: "Wie setzen Sie E-Assessments (formativ und summativ) zur Leistungserfassung ein?",
                        info: {
                            examples: "Online-Tests, Self-Assessments, Portfolio-Bewertung, automatisierte Quizzes, adaptive Tests",
                            tools: "OpenOlat Tests, Microsoft Forms, to-teach.ai, Classtime, Socrative",
                            tips: "Kombinieren Sie verschiedene Assessment-Formen. Nutzen Sie automatische Auswertung. Geben Sie klare Kriterien vor.",
                            ikt: "KM ⚙️ - Komplexität",
                            paed: "PL 🎓 - Kompetenzorientierung"
                        },
                        options: [
                            { value: 4, text: "Systematisch - Regelmässige formative und summative E-Assessments" },
                            { value: 3, text: "Häufig - E-Assessments für wichtige Prüfungen" },
                            { value: 2, text: "Gelegentlich - Vereinzelte digitale Tests" },
                            { value: 1, text: "Nie - Nur traditionelle Prüfungsformen" }
                        ]
                    }
                ]
            },
            {
                id: 3,
                name: "Medien- und Informationskompetenz",
                description: "Informationen kritisch bewerten, Medien reflektiert nutzen und neue Medieninhalte gezielt erstellen. Lernende bei der Orientierung in der digitalen Informationsflut unterstützen.",
                questions: [
                    // 3.1 Informationskompetenz
                    {
                        id: 13,
                        subcategory: "3.1 Informationskompetenz",
                        text: "Wie gut kennen Sie die Funktionsweise von Social Media und deren mögliche Einsatzorte im Unterricht?",
                        info: {
                            examples: "Algorithmen verstehen, Filter Bubbles erkennen, Social Media als Recherchequelle, digitale Identität, Influencer-Marketing",
                            tools: "Instagram, TikTok, LinkedIn, X (Twitter), YouTube",
                            tips: "Bleiben Sie informiert über aktuelle Plattformen. Thematisieren Sie Chancen und Risiken. Nutzen Sie aktuelle Beispiele.",
                            ikt: "KR 🔍 - Kritische Reflexion",
                            paed: "PL 🎓 - Medienkompetenz"
                        },
                        options: [
                            { value: 4, text: "Sehr gut - Ich kenne Funktionsweisen und didaktische Einsatzmöglichkeiten" },
                            { value: 3, text: "Gut - Ich verstehe Grundprinzipien und nutze sie gelegentlich" },
                            { value: 2, text: "Grundkenntnisse - Privates Wissen, wenig didaktische Nutzung" },
                            { value: 1, text: "Wenig - Kaum Kenntnisse über Social Media" }
                        ]
                    },
                    {
                        id: 14,
                        subcategory: "3.1 Informationskompetenz",
                        text: "Wie gut können Sie mit Lernenden digitale Hilfsmittel und KI für die Quellensuche anwenden?",
                        info: {
                            examples: "KI-gestützte Recherche, Suchstrategien, wissenschaftliche Datenbanken, Zitiertools, Plagiatsprüfung",
                            tools: "Google Scholar, Perplexity, ChatGPT, Zotero, DeepL",
                            tips: "Lehren Sie kritische Bewertung. Zeigen Sie verschiedene Suchstrategien. Üben Sie Quellenangaben.",
                            ikt: "HE 💡 - Vielfalt",
                            paed: "PU 📚 - Recherchekompetenz"
                        },
                        options: [
                            { value: 4, text: "Expertenniveau - Ich lehre systematisch digitale Recherchekompetenzen" },
                            { value: 3, text: "Gut - Ich zeige regelmässig digitale Recherchemethoden" },
                            { value: 2, text: "Grundlegend - Gelegentliche Hinweise zur digitalen Suche" },
                            { value: 1, text: "Wenig - Kaum Vermittlung digitaler Suchkompetenzen" }
                        ]
                    },
                    // 3.2 Medienkompetenz
                    {
                        id: 15,
                        subcategory: "3.2 Medienkompetenz",
                        text: "Wie vielfältig setzen Sie verschiedene Medienformate (Audio, Video, Texte, KI) im Unterricht ein?",
                        info: {
                            examples: "Lernvideos, Podcasts, interaktive Texte, KI-Chatbots, AR/VR-Inhalte, digitale Storytelling",
                            tools: "YouTube, Spotify/Podcasts, H5P, ChatGPT-Integration, Canva",
                            tips: "Variieren Sie Medienformate. Berücksichtigen Sie verschiedene Lerntypen. Prüfen Sie Urheberrechte.",
                            ikt: "MV 🔄 - Medienvielfalt",
                            paed: "PU 📚 - Multimodalität"
                        },
                        options: [
                            { value: 4, text: "Sehr vielfältig - Regelmässiger Einsatz verschiedenster Medienformate" },
                            { value: 3, text: "Vielfältig - Häufige Nutzung mehrerer Formate" },
                            { value: 2, text: "Teilweise - Gelegentlicher Einsatz verschiedener Medien" },
                            { value: 1, text: "Wenig - Hauptsächlich traditionelle Medien" }
                        ]
                    },
                    {
                        id: 16,
                        subcategory: "3.2 Medienkompetenz",
                        text: "Wie gut können Sie multimediale Inhalte (Videos, Podcasts, KI-Bots, Quizzes) selbst erstellen?",
                        info: {
                            examples: "Screencast-Videos, Podcast-Aufnahmen, KI-Chatbots trainieren, interaktive Quizzes, Erklärvideos, Animationen",
                            tools: "Clipchamp, OBS Studio, Audacity, to-teach.ai, Vyond, Powtoon",
                            tips: "Starten Sie mit kurzen Formaten. Nutzen Sie Templates. Perfektionismus vermeiden - 'Done is better than perfect'.",
                            ikt: "MF 🔓 - Medienfreiheit",
                            paed: "PDM 🛠️ - Kreative Gestaltung"
                        },
                        options: [
                            { value: 4, text: "Professionell - Ich erstelle regelmässig hochwertige Multimedia-Inhalte" },
                            { value: 3, text: "Gut - Ich kann verschiedene Medienformate erstellen" },
                            { value: 2, text: "Grundlegend - Einfache Videos oder Audio-Aufnahmen" },
                            { value: 1, text: "Wenig - Ich nutze nur vorgefertigte Inhalte" }
                        ]
                    },
                    // 3.3 Kommunikation mit digitalen Medien
                    {
                        id: 17,
                        subcategory: "3.3 Kommunikation mit digitalen Medien",
                        text: "Wie aktiv nutzen Sie digitale Medien für die Kommunikation im Kollegium und Unterricht?",
                        info: {
                            examples: "Teams-Kanäle, E-Mail-Verteiler, gemeinsame Kalender, digitale Fachschaftstreffen, Online-Konferenzen",
                            tools: "Microsoft Teams, Outlook, OneNote für Teamarbeit, SharePoint",
                            tips: "Etablieren Sie klare Kommunikationsregeln. Nutzen Sie passende Kanäle. Respektieren Sie digitale Auszeiten.",
                            ikt: "KA 🤝 - Kollaboration",
                            paed: "PLK 🏫 - Teamarbeit"
                        },
                        options: [
                            { value: 4, text: "Sehr aktiv - Digitale Kommunikation ist Standard" },
                            { value: 3, text: "Aktiv - Regelmässige digitale Kommunikation" },
                            { value: 2, text: "Teilweise - Gelegentliche digitale Kommunikation" },
                            { value: 1, text: "Wenig - Bevorzuge persönliche Kommunikation" }
                        ]
                    }
                ]
            },
            {
                id: 4,
                name: "Datenverwaltung und Datensicherheit",
                description: "Verantwortungsvoller Umgang mit digitalen Daten sowie die Fähigkeit, personenbezogene und sensible Informationen im schulischen Kontext zu schützen.",
                questions: [
                    // 4.1 Datenschutz und Datensicherheit
                    {
                        id: 18,
                        subcategory: "4.1 Datenschutz und Datensicherheit",
                        text: "Wie gut kennen Sie die rechtlichen Grundlagen zum Datenschutz im schulischen Kontext?",
                        info: {
                            examples: "DSGVO-Prinzipien, Einwilligungen für Fotos/Videos, Notenverwaltung, Löschfristen, Auskunftsrecht, Schweigepflicht",
                            tools: "Datenschutz-Richtlinien Kanton Zürich, Schulinterne Vorgaben, Einwilligungsformulare",
                            tips: "Besuchen Sie Datenschutz-Schulungen. Dokumentieren Sie Prozesse. Im Zweifel: Datenschutzbeauftragten fragen.",
                            ikt: "KR 🔍 - Rechtssicherheit",
                            paed: "PLL 👥 - Verantwortung"
                        },
                        options: [
                            { value: 4, text: "Sehr gut - Ich kenne Details und wende sie sicher an" },
                            { value: 3, text: "Gut - Ich kenne die wichtigsten Regelungen" },
                            { value: 2, text: "Grundkenntnisse - Ich kenne die Basics" },
                            { value: 1, text: "Unsicher - Ich bin oft unsicher bei Datenschutzfragen" }
                        ]
                    },
                    {
                        id: 19,
                        subcategory: "4.1 Datenschutz und Datensicherheit",
                        text: "Wie sicher verwalten Sie Ihre Passwörter und Zugangsdaten?",
                        info: {
                            examples: "Passwort-Manager, 2FA/MFA, regelmässige Updates, sichere Passwort-Richtlinien, Biometrie, Hardware-Token",
                            tools: "Microsoft Authenticator, Bitwarden, KeePass, 1Password",
                            tips: "Nutzen Sie für jeden Dienst ein eigenes Passwort. Aktivieren Sie überall 2FA. Teilen Sie niemals Passwörter.",
                            ikt: "DS 🔒 - Datensicherheit",
                            paed: "PU 📚 - Selbstschutz"
                        },
                        options: [
                            { value: 4, text: "Professionell - Passwort-Manager und 2FA überall aktiviert" },
                            { value: 3, text: "Sicher - Starke, unterschiedliche Passwörter" },
                            { value: 2, text: "Ausreichend - Einige sichere Passwörter" },
                            { value: 1, text: "Unsicher - Oft dieselben oder einfache Passwörter" }
                        ]
                    },
                    // 4.2 Datenmanagement
                    {
                        id: 20,
                        subcategory: "4.2 Datenmanagement",
                        text: "Wie strukturiert können Sie digitale Daten organisieren und zugänglich machen?",
                        info: {
                            examples: "Ordnerstrukturen, Namenskonventionen, Metadaten, Versionierung, Archivierung, Backup-Strategien",
                            tools: "OneDrive, SharePoint, Datei-Explorer, Cloud-Backup",
                            tips: "Entwickeln Sie ein einheitliches System. Nutzen Sie sprechende Dateinamen. Automatisieren Sie Backups.",
                            ikt: "RE 💚 - Effizienz",
                            paed: "PLK 🏫 - Organisation"
                        },
                        options: [
                            { value: 4, text: "Sehr strukturiert - Durchdachtes System mit Automatisierung" },
                            { value: 3, text: "Strukturiert - Klare Ordnung und regelmässige Pflege" },
                            { value: 2, text: "Teilweise - Grundlegende Ordnung vorhanden" },
                            { value: 1, text: "Unstrukturiert - Wenig System in der Datenverwaltung" }
                        ]
                    },
                    {
                        id: 21,
                        subcategory: "4.2 Datenmanagement",
                        text: "Wie gut können Sie KI für das Datenmanagement einsetzen?",
                        info: {
                            examples: "Automatische Kategorisierung, KI-gestützte Suche, Datenanalyse, automatische Tags, intelligente Filter",
                            tools: "Microsoft Copilot, Power Automate, KI-Suchfunktionen, ChatGPT für Datenstrukturierung",
                            tips: "Nutzen Sie KI zur Automatisierung. Prüfen Sie Vorschläge kritisch. Behalten Sie die Kontrolle.",
                            ikt: "RE 💚 - Automatisierung",
                            paed: "PDM 🛠️ - Effizienz"
                        },
                        options: [
                            { value: 4, text: "Fortgeschritten - Ich nutze KI aktiv für Datenmanagement" },
                            { value: 3, text: "Gut - Gelegentliche KI-Nutzung für Datenaufgaben" },
                            { value: 2, text: "Grundlegend - Erste Experimente mit KI-Tools" },
                            { value: 1, text: "Keine - Ich nutze keine KI für Datenmanagement" }
                        ]
                    },
                    // 4.3 Rechtliche und ethische Aspekte
                    {
                        id: 22,
                        subcategory: "4.3 Rechtliche und ethische Aspekte",
                        text: "Wie sicher wenden Sie das Urheberrecht im schulischen Kontext an?",
                        info: {
                            examples: "Creative Commons, Zitatrecht, Schrankenregelungen, Bildrechte, Lizenzmodelle, OER-Materialien",
                            tools: "CC-Search, Pixabay, Unsplash, OER-Repositorien",
                            tips: "Prüfen Sie Lizenzen genau. Geben Sie Quellen an. Nutzen Sie freie Alternativen.",
                            ikt: "KR 🔍 - Rechtsbewusstsein",
                            paed: "PU 📚 - Vorbildfunktion"
                        },
                        options: [
                            { value: 4, text: "Sehr sicher - Ich kenne Details und wende sie korrekt an" },
                            { value: 3, text: "Sicher - Ich beachte Urheberrechte konsequent" },
                            { value: 2, text: "Unsicher - Ich bin oft unsicher bei Urheberrechtsfragen" },
                            { value: 1, text: "Wenig - Ich kenne mich kaum mit Urheberrecht aus" }
                        ]
                    },
                    {
                        id: 23,
                        subcategory: "4.3 Rechtliche und ethische Aspekte",
                        text: "Wie kritisch überprüfen Sie KI-Outputs bevor Sie diese einsetzen?",
                        info: {
                            examples: "Faktencheck, Bias-Erkennung, ethische Bewertung, Quellenprüfung, Altersangemessenheit, Diskriminierungsfreiheit",
                            tools: "Faktenchecker, eigene Recherche, Peer-Review, kritische Reflexion",
                            tips: "Verlassen Sie sich nie blind auf KI. Prüfen Sie Fakten. Bedenken Sie ethische Aspekte.",
                            ikt: "KR 🔍 - Kritische Bewertung",
                            paed: "PDM 🛠️ - Qualitätssicherung"
                        },
                        options: [
                            { value: 4, text: "Immer kritisch - Systematische Überprüfung aller KI-Inhalte" },
                            { value: 3, text: "Meist kritisch - Regelmässige Überprüfung wichtiger Punkte" },
                            { value: 2, text: "Teilweise - Gelegentliche Stichproben" },
                            { value: 1, text: "Selten - Ich übernehme KI-Outputs meist ungeprüft" }
                        ]
                    }
                ]
            },
            {
                id: 5,
                name: "Kommunikation und Kollaboration",
                description: "Alle Fähigkeiten zur digitalen Interaktion, Zusammenarbeit und Kommunikation. Digitale Medien für den professionellen Austausch nutzen und kollaborative Lernprozesse gestalten.",
                questions: [
                    // 5.1 Digitale Kommunikation
                    {
                        id: 24,
                        subcategory: "5.1 Digitale Kommunikation",
                        text: "Wie aktiv nutzen Sie digitale Kommunikationstools für den Austausch mit Kollegium und Lernenden?",
                        info: {
                            examples: "Teams-Chat, E-Mail-Kommunikation, Videocalls, digitale Sprechstunden, Ankündigungen, Newsfeeds",
                            tools: "Microsoft Teams, Outlook, Zoom, Webex",
                            tips: "Definieren Sie Kommunikationszeiten. Nutzen Sie Status-Anzeigen. Trennen Sie Kanäle nach Zweck.",
                            ikt: "KN 🌐 - Vernetzung",
                            paed: "PL 🎓 - Erreichbarkeit"
                        },
                        options: [
                            { value: 4, text: "Sehr aktiv - Tägliche Nutzung verschiedener digitaler Kanäle" },
                            { value: 3, text: "Aktiv - Regelmässige digitale Kommunikation" },
                            { value: 2, text: "Gelegentlich - Bei Bedarf digitale Kommunikation" },
                            { value: 1, text: "Selten - Bevorzuge persönliche Gespräche" }
                        ]
                    },
                    {
                        id: 25,
                        subcategory: "5.1 Digitale Kommunikation",
                        text: "Wie gut wenden Sie Netiquette-Regeln in der digitalen Kommunikation an?",
                        info: {
                            examples: "Höfliche Anrede, klare Betreffzeilen, angemessene Reaktionszeiten, respektvoller Ton, Emoji-Nutzung, Gross-/Kleinschreibung",
                            tools: "E-Mail-Etikette, Chat-Regeln, Video-Call-Etikette",
                            tips: "Seien Sie ein Vorbild. Kommunizieren Sie Erwartungen klar. Bleiben Sie professionell.",
                            ikt: "MG 🛠️ - Gestaltung",
                            paed: "PLL 👥 - Wertschätzung"
                        },
                        options: [
                            { value: 4, text: "Vorbildlich - Ich achte stets auf professionelle digitale Kommunikation" },
                            { value: 3, text: "Gut - Meist angemessene digitale Kommunikation" },
                            { value: 2, text: "Grundlegend - Basis-Höflichkeit vorhanden" },
                            { value: 1, text: "Verbesserungswürdig - Wenig Bewusstsein für Netiquette" }
                        ]
                    },
                    // 5.2 Digitale Kollaboration
                    {
                        id: 26,
                        subcategory: "5.2 Digitale Kollaboration",
                        text: "Wie routiniert nutzen Sie kollaborative Dokumente für gemeinsame Arbeit?",
                        info: {
                            examples: "Simultane Dokumentbearbeitung, Kommentarfunktion, Versionskontrolle, gemeinsame Präsentationen, geteilte Notizen",
                            tools: "Office 365 Co-Authoring, Google Docs, OneNote, Miro, Conceptboard",
                            tips: "Nutzen Sie @-Mentions. Aktivieren Sie Benachrichtigungen. Dokumentieren Sie Änderungen.",
                            ikt: "KA 🤝 - Zusammenarbeit",
                            paed: "PU 📚 - Teamwork"
                        },
                        options: [
                            { value: 4, text: "Expertenniveau - Ich leite komplexe kollaborative Projekte" },
                            { value: 3, text: "Routiniert - Regelmässige Arbeit mit geteilten Dokumenten" },
                            { value: 2, text: "Grundkenntnisse - Gelegentliche Nutzung" },
                            { value: 1, text: "Wenig - Ich arbeite lieber mit eigenen Dateien" }
                        ]
                    },
                    {
                        id: 27,
                        subcategory: "5.2 Digitale Kollaboration",
                        text: "Wie gut können Sie digitale Gruppenarbeiten und Teamprojekte koordinieren?",
                        info: {
                            examples: "Breakout-Rooms, digitale Projektboards, Aufgabenverteilung, Timeline-Planung, digitale Workshops",
                            tools: "Teams Breakout Rooms, Trello, Planner, Padlet, Mural",
                            tips: "Definieren Sie klare Rollen. Setzen Sie Meilensteine. Nutzen Sie visuelle Projektboards.",
                            ikt: "MG 🛠️ - Management",
                            paed: "PDM 🛠️ - Projektleitung"
                        },
                        options: [
                            { value: 4, text: "Professionell - Ich manage komplexe digitale Teamprojekte souverän" },
                            { value: 3, text: "Gut - Ich kann digitale Gruppenarbeiten strukturiert anleiten" },
                            { value: 2, text: "Grundlegend - Einfache digitale Zusammenarbeit" },
                            { value: 1, text: "Wenig - Kaum Erfahrung mit digitaler Projektkoordination" }
                        ]
                    },
                    // 5.3 Digitale Partizipation
                    {
                        id: 28,
                        subcategory: "5.3 Digitale Partizipation",
                        text: "Wie zeitnah und professionell beantworten Sie digitale Nachrichten?",
                        info: {
                            examples: "24h-Regel bei E-Mails, Abwesenheitsnotiz, Priorisierung, automatische Antworten, Weiterleitungen",
                            tools: "Outlook-Regeln, automatische Antworten, Kalender-Status, Teams-Status",
                            tips: "Kommunizieren Sie Ihre Erreichbarkeit. Setzen Sie Prioritäten. Nutzen Sie Templates für häufige Anfragen.",
                            ikt: "RE 💚 - Effizienz",
                            paed: "PLK 🏫 - Verlässlichkeit"
                        },
                        options: [
                            { value: 4, text: "Sehr professionell - Strukturierte Verwaltung, zeitnahe Antworten" },
                            { value: 3, text: "Professionell - Meist innerhalb von 24-48 Stunden" },
                            { value: 2, text: "Ausreichend - Gelegentliche Verzögerungen" },
                            { value: 1, text: "Verbesserungswürdig - Oft verspätete Antworten" }
                        ]
                    },
                    {
                        id: 29,
                        subcategory: "5.3 Digitale Partizipation",
                        text: "Wie aktiv verfolgen Sie Informationen in Teams und OpenOlat?",
                        info: {
                            examples: "Kanalabonnements, Benachrichtigungseinstellungen, regelmässige Checks, Aktivitätsfeed, wichtige Markierungen",
                            tools: "Teams Activity Feed, OpenOlat Notifications, Outlook-Integration",
                            tips: "Passen Sie Benachrichtigungen an. Priorisieren Sie wichtige Kanäle. Planen Sie feste Check-Zeiten.",
                            ikt: "KN 🌐 - Vernetzung",
                            paed: "PLK 🏫 - Informiertheit"
                        },
                        options: [
                            { value: 4, text: "Sehr aktiv - Ich bin stets auf dem aktuellen Stand" },
                            { value: 3, text: "Aktiv - Regelmässige Überprüfung wichtiger Kanäle" },
                            { value: 2, text: "Gelegentlich - Sporadische Checks" },
                            { value: 1, text: "Selten - Ich verpasse oft wichtige Informationen" }
                        ]
                    }
                ]
            }
        ];

        // State Management
        let currentSectionIndex = 0;
        let answers = {};
        let testCode = "";
        let testStartTime = null;

        // Start Test Function
        window.startTest = function() {
            const codeInput = document.getElementById('accessCode');
            const code = codeInput.value.trim().toUpperCase();
            
            console.log('Eingegebener Code:', code);
            
            if (code.length < 4) {
                alert('Bitte geben Sie einen gültigen Code ein.');
                return;
            }
            
            testCode = code;
            testStartTime = new Date();
            
            // Hide code entry, show test
            document.getElementById('codeEntry').style.display = 'none';
            document.getElementById('testSection').classList.add('active');
            
            // Initialize first section
            showSection(0);
        }

        // Show Section Function
        window.showSection = function(sectionIndex) {
            const section = sections[sectionIndex];
            const container = document.getElementById('sectionContainer');
            
            // Update progress bar
            const progress = Math.round(((sectionIndex + 1) / sections.length) * 100);
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = progress + '%';
            progressBar.textContent = `Bereich ${sectionIndex + 1} von ${sections.length}`;
            
            // Calculate answered questions in this section
            const answeredInSection = section.questions.filter(q => answers[q.id] !== undefined).length;
            const totalInSection = section.questions.length;
            
            // Create section HTML
            let sectionHTML = `
                <div class="section-header">
                    <h2 class="section-title">${section.name}</h2>
                    <p class="section-description">${section.description}</p>
                    <div class="section-progress">
                        ${answeredInSection} von ${totalInSection} Fragen beantwortet
                    </div>
                </div>
            `;
            
            // Add all questions for this section
            section.questions.forEach((question, qIndex) => {
                const isAnswered = answers[question.id] !== undefined;
                
                // NEU: CSS-Klasse für Unterkategorie generieren
                const subcatClass = 'subcategory-' + question.subcategory.split(' ')[0].replace('.', '-');

                sectionHTML += `
                    <div class="question-card ${isAnswered ? 'answered' : ''}" id="question-${question.id}">
                        <div class="question-header">
                            <span class="category-badge category-${section.id}">
                                Frage ${qIndex + 1} von ${section.questions.length}
                            </span>
                        </div>
                        <div class="subcategory-label ${subcatClass}">${question.subcategory}</div>
                        <div class="question-text">
                            <span style="flex: 1;">${question.text}</span>
                            <button class="info-button" onclick="toggleInfo(${question.id})" title="Mehr Informationen">
                                ?
                            </button>
                        </div>
                        <div id="info-${question.id}" class="info-box">
                            <h4>🔍 Praktische Beispiele</h4>
                            <p>${question.info.examples}</p>
                            
                            <h4>🛠️ Empfohlene Tools</h4>
                            <p>${question.info.tools}</p>
                            
                            <h4>💡 Tipp</h4>
                            <p>${question.info.tips}</p>
                            
                            <div class="concept-tags">
                                <span class="concept-tag ikt-tag">${question.info.ikt}</span>
                                <span class="concept-tag paed-tag">${question.info.paed}</span>
                            </div>
                        </div>
                        <div class="answer-options">
                            ${question.options.map((option, i) => `
                                <div class="answer-option ${answers[question.id] === option.value ? 'selected' : ''}" 
                                     onclick="selectAnswer(${question.id}, ${option.value}, this)">
                                    <input type="radio" 
                                           name="question${question.id}" 
                                           value="${option.value}"
                                           ${answers[question.id] === option.value ? 'checked' : ''}>
                                    <label>${option.text}</label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = sectionHTML;
            
            // Update navigation buttons
            document.getElementById('prevButton').style.display = sectionIndex === 0 ? 'none' : 'block';
            document.getElementById('nextButton').style.display = sectionIndex === sections.length - 1 ? 'none' : 'block';
            document.getElementById('submitButton').style.display = sectionIndex === sections.length - 1 ? 'block' : 'none';
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Toggle Info Box Function
        window.toggleInfo = function(questionId) {
            const infoBox = document.getElementById(`info-${questionId}`);
            if (infoBox) {
                infoBox.classList.toggle('active');
            }
        }

        // Select Answer Function
        window.selectAnswer = function(questionId, value, element) {
            answers[questionId] = value;
            
            // Update UI
            const questionCard = document.getElementById(`question-${questionId}`);
            questionCard.classList.add('answered');
            
            // Update selected state for this question's options
            const options = questionCard.querySelectorAll('.answer-option');
            options.forEach(option => {
                option.classList.remove('selected');
            });
            element.classList.add('selected');
            element.querySelector('input').checked = true;
            
            // Update section progress display without reloading
            const section = sections[currentSectionIndex];
            const answeredInSection = section.questions.filter(q => answers[q.id] !== undefined).length;
            const totalInSection = section.questions.length;
            const progressElement = document.querySelector('.section-progress');
            if (progressElement) {
                progressElement.textContent = `${answeredInSection} von ${totalInSection} Fragen beantwortet`;
            }
        }

        // Check if all questions in current section are answered
        window.checkSectionComplete = function() {
            const currentSection = sections[currentSectionIndex];
            for (let question of currentSection.questions) {
                if (!answers[question.id]) {
                    return false;
                }
            }
            return true;
        }

        // Navigation Functions
        window.previousSection = function() {
            if (currentSectionIndex > 0) {
                currentSectionIndex--;
                showSection(currentSectionIndex);
            }
        }

        window.nextSection = function() {
            if (!checkSectionComplete()) {
                const currentSection = sections[currentSectionIndex];
                const unanswered = currentSection.questions.filter(q => !answers[q.id]).length;
                alert(`Bitte beantworten Sie alle ${unanswered} verbleibenden Fragen in diesem Bereich.`);
                return;
            }
            
            if (currentSectionIndex < sections.length - 1) {
                currentSectionIndex++;
                showSection(currentSectionIndex);
            }
        }

        // Submit Test Function
        window.submitTest = function() {
            if (!checkSectionComplete()) {
                const currentSection = sections[currentSectionIndex];
                const unanswered = currentSection.questions.filter(q => !answers[q.id]).length;
                alert(`Bitte beantworten Sie alle ${unanswered} verbleibenden Fragen in diesem Bereich.`);
                return;
            }
            
            // Calculate results
            const results = calculateResults();
            
            // Save to Firebase and localStorage
            saveResults(results);
            
            // Show results
            showResults(results);
        }

        // Calculate Results Function
        window.calculateResults = function() {
            const categoryScores = {};
            const categoryMaxScores = {};
            const categoryQuestions = {};
            const subcategoryScores = {};
            
            // Initialize categories
            for (let i = 1; i <= 5; i++) {
                categoryScores[i] = 0;
                categoryMaxScores[i] = 0;
                categoryQuestions[i] = 0;
                subcategoryScores[i] = {};
            }
            
            // Calculate scores per category and subcategory
            sections.forEach(section => {
                section.questions.forEach(question => {
                    if (answers[question.id]) {
                        categoryScores[section.id] += answers[question.id];
                        categoryMaxScores[section.id] += 4; // Max score per question is 4
                        categoryQuestions[section.id]++;
                        
                        // Track subcategory scores
                        if (!subcategoryScores[section.id][question.subcategory]) {
                            subcategoryScores[section.id][question.subcategory] = {
                                score: 0,
                                maxScore: 0,
                                count: 0
                            };
                        }
                        subcategoryScores[section.id][question.subcategory].score += answers[question.id];
                        subcategoryScores[section.id][question.subcategory].maxScore += 4;
                        subcategoryScores[section.id][question.subcategory].count++;
                    }
                });
            });
            
            // Calculate percentages
            const categoryPercentages = {};
            for (let i = 1; i <= 5; i++) {
                if (categoryMaxScores[i] > 0) {
                    categoryPercentages[i] = Math.round((categoryScores[i] / categoryMaxScores[i]) * 100);
                } else {
                    categoryPercentages[i] = 0;
                }
            }
            
            // Calculate total score
            const totalScore = Object.values(categoryScores).reduce((a, b) => a + b, 0);
            const totalMaxScore = Object.values(categoryMaxScores).reduce((a, b) => a + b, 0);
            const totalPercentage = Math.round((totalScore / totalMaxScore) * 100);
            
            return {
                totalScore,
                totalMaxScore,
                totalPercentage,
                categoryScores,
                categoryMaxScores,
                categoryPercentages,
                subcategoryScores,
                answers: answers,
                testCode,
                timestamp: new Date().toISOString(),
                duration: Math.round((new Date() - testStartTime) / 1000) // in seconds
            };
        }

        // Show Results Function
        window.showResults = function(results) {
            // Hide test section
            document.getElementById('testSection').classList.remove('active');
            
            // Show results section
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.classList.add('active');
            
            // Set score circle
            const scoreCircle = document.getElementById('scoreCircle');
            const scoreText = document.getElementById('scoreText');
            
            scoreCircle.textContent = results.totalPercentage + '%';
            
            if (results.totalPercentage >= 80) {
                scoreCircle.className = 'score-circle score-excellent';
                scoreText.textContent = 'Ausgezeichnet! Sie verfügen über sehr gute digitale Kompetenzen.';
            } else if (results.totalPercentage >= 60) {
                scoreCircle.className = 'score-circle score-good';
                scoreText.textContent = 'Gut! Sie haben solide digitale Kompetenzen mit Entwicklungspotenzial.';
            } else {
                scoreCircle.className = 'score-circle score-needs-improvement';
                scoreText.textContent = 'Es besteht Entwicklungsbedarf in mehreren Bereichen.';
            }
            
            // Category Results with subcategories
            const categoryNames = [
                "Grundkenntnisse IKT",
                "Anwendung im Unterricht",
                "Medien- und Informationskompetenz",
                "Datenverwaltung und Datensicherheit",
                "Kommunikation und Kollaboration"
            ];
            
            const categoryResultsHTML = categoryNames.map((name, i) => {
                const categoryNum = i + 1;
                const percentage = results.categoryPercentages[categoryNum];
                const barColor = percentage >= 80 ? '#28a745' : percentage >= 60 ? '#ffc107' : '#dc3545';
                
                // Get subcategory details
                let subcategoryHTML = '';
                if (results.subcategoryScores[categoryNum]) {
                    subcategoryHTML = '<div class="subcategory-results">';
                    for (const [subcat, data] of Object.entries(results.subcategoryScores[categoryNum])) {
                        const subPercentage = Math.round((data.score / data.maxScore) * 100);
                        subcategoryHTML += `<div class="subcategory-item">${subcat}: ${subPercentage}%</div>`;
                    }
                    subcategoryHTML += '</div>';
                }
                
                return `
                    <div class="category-result">
                        <div class="category-result-header">
                            <span class="category-result-title">${name}</span>
                            <span class="category-result-score">${percentage}%</span>
                        </div>
                        <div class="result-bar-container">
                            <div class="result-bar" 
                                 style="width: ${percentage}%; background: ${barColor};">
                            </div>
                        </div>
                        ${subcategoryHTML}
                    </div>
                `;
            }).join('');
            
            document.getElementById('categoryResults').innerHTML = categoryResultsHTML;
            
            // Recommendations
            const recommendations = generateRecommendations(results);
            const recommendationsHTML = recommendations.map(rec => `
                <div class="recommendation-item">
                    <strong>${rec.title}:</strong> ${rec.text}
                </div>
            `).join('');
            
            document.getElementById('recommendationsList').innerHTML = recommendationsHTML;
        }

        // Generate Recommendations Function
        window.generateRecommendations = function(results) {
            const recommendations = [];
            const categoryNames = [
                "Grundkenntnisse IKT",
                "Anwendung im Unterricht",
                "Medien- und Informationskompetenz",
                "Datenverwaltung und Datensicherheit",
                "Kommunikation und Kollaboration"
            ];
            
            const categoryRecommendations = {
                1: [
                    "Besuchen Sie Basis-Schulungen zu Office 365 und Cloud-Diensten",
                    "Nutzen Sie die IT-Sprechstunde für individuelle Unterstützung",
                    "Erkunden Sie systematisch die Ed-Tech-Lizenzen Ihrer Schule"
                ],
                2: [
                    "Experimentieren Sie mit interaktiven Tools wie Kahoot oder Padlet",
                    "Besuchen Sie Workshops zu digitaler Unterrichtsgestaltung",
                    "Entwickeln Sie erste digitale Lerneinheiten mit H5P"
                ],
                3: [
                    "Lernen Sie Tools zur Erstellung multimedialer Inhalte kennen",
                    "Integrieren Sie Medienkritik als festen Unterrichtsbestandteil",
                    "Erstellen Sie erste eigene Lernvideos oder Podcasts"
                ],
                4: [
                    "Nehmen Sie an einer Datenschutz-Schulung teil",
                    "Implementieren Sie ein Passwort-Management-System",
                    "Entwickeln Sie eine strukturierte Dateiablage mit klaren Namenskonventionen"
                ],
                5: [
                    "Nutzen Sie Teams aktiver für die Zusammenarbeit",
                    "Lernen Sie kollaborative Arbeitsweisen mit Office 365 kennen",
                    "Etablieren Sie klare digitale Kommunikationsregeln"
                ]
            };
            
            // Find weakest areas (below 60%)
            for (let i = 1; i <= 5; i++) {
                if (results.categoryPercentages[i] < 60) {
                    const recList = categoryRecommendations[i];
                    recommendations.push({
                        title: categoryNames[i - 1],
                        text: recList[Math.floor(Math.random() * recList.length)]
                    });
                }
            }
            
            // If no weak areas, suggest advanced topics
            if (recommendations.length === 0) {
                recommendations.push({
                    title: "Fortgeschrittene Kompetenzen",
                    text: "Erkunden Sie KI-Tools für den Unterricht und werden Sie Digital-Mentor für Ihr Kollegium"
                });
            }
            
            return recommendations.slice(0, 3); // Return max 3 recommendations
        }

        // Save Results Function with Firebase-Integration
        async function saveResults(results) {
            // Lokale Speicherung (Backup)
            let allResults = JSON.parse(localStorage.getItem('bbw_test_results') || '[]');
            allResults.push(results);
            localStorage.setItem('bbw_test_results', JSON.stringify(allResults));
            
            // Firebase Speicherung
            if (firebaseReady && db) {
                try {
                    // Prüfe ob Code existiert
                    const codesRef = collection(db, 'codes');
                    const q = query(codesRef, where("code", "==", results.testCode));
                    const querySnapshot = await getDocs(q);
                    
                    if (!querySnapshot.empty || results.testCode === "0HDM-V3EU" || results.testCode === "TEST-1234") {
                        // Code existiert oder ist Test-Code - speichere Ergebnis
                        const resultsRef = collection(db, 'results');
                        await addDoc(resultsRef, {
                            ...results,
                            createdAt: serverTimestamp()
                        });
                        console.log("Ergebnisse in Firebase gespeichert");
                    } else {
                        console.warn("Ungültiger Code - Ergebnisse nur lokal gespeichert");
                        alert("Hinweis: Der verwendete Code ist ungültig oder abgelaufen. Ihre Ergebnisse wurden nur lokal gespeichert.");
                    }
                } catch (error) {
                    console.error("Fehler beim Speichern in Firebase:", error);
                    alert("Ihre Ergebnisse konnten nicht online gespeichert werden. Sie wurden nur lokal gespeichert.");
                }
            } else {
                console.log("Firebase nicht verfügbar - nur lokale Speicherung");
            }
        }

        // Restart Test Function
        window.restartTest = function() {
            // Reset all variables
            currentSectionIndex = 0;
            answers = {};
            testCode = "";
            testStartTime = null;
            
            // Reset UI
            document.getElementById('resultsSection').classList.remove('active');
            document.getElementById('testSection').classList.remove('active');
            document.getElementById('codeEntry').style.display = 'block';
            document.getElementById('accessCode').value = '';
        }

        // Enable Enter key for code input
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('accessCode').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startTest();
                }
            });
        });
    </script>
</body>
</html>
